parameters:
  name: ''
  vmImage: ''
  matrix: []

jobs:
  - job: ${{ parameters.name }}
    pool:
      vmImage: ${{ parameters.vmImage }}
      strategy:
        matrix:
          Python36:
            python.version: '3.6'
          Python37:
            python.version: '3.7'

      steps:
        - task: UsePythonVersion@0
          inputs:
            versionSpec: '$(python.version)'
          displayName: 'Use Python $(python.version)'

        - script: |
            python -m pip install --upgrade pip
            pip install -r requirements.txt
            pip install pytest-azurepipelines
            pip install .
          displayName: 'Install dependencies'

        - script: |
            pytest
          displayName: 'pytest'
